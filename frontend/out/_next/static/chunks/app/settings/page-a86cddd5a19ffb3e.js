(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{8571:function(e){var t,s,n,r=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{s="function"==typeof clearTimeout?clearTimeout:a}catch(e){s=a}}();var c=[],l=!1,u=-1;function d(){l&&n&&(l=!1,n.length?c=n.concat(c):u=-1,c.length&&h())}function h(){if(!l){var e=i(d);l=!0;for(var t=c.length;t;){for(n=c,c=[];++u<t;)n&&n[u].run();u=-1,t=c.length}n=null,l=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===a||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];c.push(new m(e,t)),1!==c.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}},2639:function(e,t,s){Promise.resolve().then(s.bind(s,1508))},1508:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var n=s(7821),r=s(8078),o=s(8956),a=s(9198),i=s(8002),c=s(555),l=s(1978),u=s(991),d=s(961),h=s(2625),m=s(778),f=s(897),p=s(4275),x=s(6576);let g=(0,x.Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),y=(0,x.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var b=s(4542),v=s(8504),k=s(3619),N=s(1794);let j=[{id:"account",icon:a.Z,label:"Account",href:"/settings/account",badge:null},{id:"chats",icon:i.Z,label:"Chats",href:"/settings/chats",badge:"2"},{id:"notifications",icon:c.Z,label:"Notifications",href:"/settings/notifications",badge:null},{id:"appearance",icon:l.Z,label:"App Appearance",href:"/settings/appearance",badge:null},{id:"help",icon:u.Z,label:"Help",href:"/settings/help",badge:null},{id:"friends",icon:d.Z,label:"Invite Friends",href:"/settings/invite",badge:null}];function S(){let e=(0,v.useRouter)(),{toast:t}=(0,k.pm)(),[s,a]=(0,r.useState)(!1),[i,l]=(0,r.useState)(!0),[u,d]=(0,r.useState)(!0),x=async()=>{try{N.x.clearAuth(),t({title:"Signed out",description:"You have been successfully signed out"}),e.push("/login")}catch(e){console.error("Sign out error:",e),t({title:"Sign out failed",description:"There was an error signing out",variant:"destructive"})}};return(0,n.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,n.jsx)("div",{className:"sticky top-0 bg-background/95 backdrop-blur-sm border-b z-10",children:(0,n.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,n.jsx)(b.default,{href:"/app/voice",className:"p-2 -ml-2",children:(0,n.jsx)(h.Z,{className:"h-5 w-5 rotate-180"})}),(0,n.jsx)("h1",{className:"text-lg font-semibold",children:"Profile"}),(0,n.jsx)("div",{className:"w-9"})," "]})}),(0,n.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,n.jsx)("div",{className:"px-4",children:(0,n.jsx)("div",{className:"space-y-1",children:j.map(e=>{let t=e.icon;return(0,n.jsxs)(b.default,{href:e.href,className:"flex items-center justify-between p-4 rounded-xl hover:bg-muted/50 transition-colors",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"p-2 bg-muted rounded-lg",children:(0,n.jsx)(t,{className:"h-5 w-5"})}),(0,n.jsx)("span",{className:"font-medium",children:e.label})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[e.badge&&(0,n.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium bg-primary text-primary-foreground rounded-full",children:e.badge}),(0,n.jsx)(h.Z,{className:"h-5 w-5 text-muted-foreground"})]})]},e.id)})})}),(0,n.jsxs)("div",{className:"px-4 mt-6",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-muted-foreground mb-3 px-4",children:"PREFERENCES"}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-xl hover:bg-muted/50",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"p-2 bg-muted rounded-lg",children:(0,n.jsx)(m.Z,{className:"h-5 w-5"})}),(0,n.jsx)("span",{className:"font-medium",children:"Dark Mode"})]}),(0,n.jsx)(o.r,{checked:s,onCheckedChange:a})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-xl hover:bg-muted/50",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"p-2 bg-muted rounded-lg",children:(0,n.jsx)(c.Z,{className:"h-5 w-5"})}),(0,n.jsx)("span",{className:"font-medium",children:"Push Notifications"})]}),(0,n.jsx)(o.r,{checked:i,onCheckedChange:l})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-xl hover:bg-muted/50",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"p-2 bg-muted rounded-lg",children:(0,n.jsx)(f.Z,{className:"h-5 w-5"})}),(0,n.jsx)("span",{className:"font-medium",children:"Sound Effects"})]}),(0,n.jsx)(o.r,{checked:u,onCheckedChange:d})]})]})]}),(0,n.jsxs)("div",{className:"px-4 mt-6 mb-8",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-muted-foreground mb-3 px-4",children:"MORE"}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)(b.default,{href:"/legal/privacy",className:"flex items-center justify-between p-4 rounded-xl hover:bg-muted/50 transition-colors",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"p-2 bg-muted rounded-lg",children:(0,n.jsx)(p.Z,{className:"h-5 w-5"})}),(0,n.jsx)("span",{className:"font-medium",children:"Privacy Policy"})]}),(0,n.jsx)(h.Z,{className:"h-5 w-5 text-muted-foreground"})]}),(0,n.jsxs)(b.default,{href:"/legal/terms",className:"flex items-center justify-between p-4 rounded-xl hover:bg-muted/50 transition-colors",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"p-2 bg-muted rounded-lg",children:(0,n.jsx)(g,{className:"h-5 w-5"})}),(0,n.jsx)("span",{className:"font-medium",children:"Terms of Service"})]}),(0,n.jsx)(h.Z,{className:"h-5 w-5 text-muted-foreground"})]}),(0,n.jsx)("button",{onClick:x,className:"w-full flex items-center justify-between p-4 rounded-xl hover:bg-destructive/10 transition-colors text-destructive",children:(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"p-2 bg-destructive/10 rounded-lg",children:(0,n.jsx)(y,{className:"h-5 w-5"})}),(0,n.jsx)("span",{className:"font-medium",children:"Sign Out"})]})})]})]}),(0,n.jsx)("div",{className:"text-center py-6 text-xs text-muted-foreground",children:"PharmX Voice Social v1.0.0"})]})]})}},8956:function(e,t,s){"use strict";s.d(t,{r:function(){return i}});var n=s(7821),r=s(8078),o=s(538),a=s(3892);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(o.fC,{className:(0,a.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...r,ref:t,children:(0,n.jsx)(o.bU,{className:(0,a.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});i.displayName=o.fC.displayName},3619:function(e,t,s){"use strict";s.d(t,{pm:function(){return h}});var n=s(8078);let r=0,o=new Map,a=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?a(s):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],l={toasts:[]};function u(e){l=i(l,e),c.forEach(e=>{e(l)})}function d(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>u({type:"DISMISS_TOAST",toastId:s});return u({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||n()}}}),{id:s,dismiss:n,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function h(){let[e,t]=n.useState(l);return n.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},1794:function(e,t,s){"use strict";s.d(t,{x:function(){return o}});let n=s(8571).env.NEXT_PUBLIC_API_URL||"https://pharmx-api.kasimhussain333.workers.dev";class r{setAuth(e,t){console.log("[API Client] Setting auth - Token length:",e.length,"Session ID:",t),this.token=e,this.sessionId=t,localStorage.setItem("pharmx_token",e),localStorage.setItem("pharmx_session",t),console.log("[API Client] Stored auth in localStorage")}setToken(e){console.log("[API Client] Setting token only - Length:",e.length),this.token=e,localStorage.setItem("pharmx_token",e),console.log("[API Client] Stored token in localStorage")}getToken(){return this.token||(this.token=localStorage.getItem("pharmx_token")),this.token}getSessionId(){return this.sessionId||(this.sessionId=localStorage.getItem("pharmx_session")),this.sessionId}clearAuth(){this.token=null,this.sessionId=null,localStorage.removeItem("pharmx_token"),localStorage.removeItem("pharmx_session")}clearToken(){this.clearAuth()}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={...t.headers||{}};s["Content-Type"]||t.body instanceof FormData||(s["Content-Type"]="application/json"),this.token&&(s.Authorization="Bearer ".concat(this.token)),this.sessionId&&(s["X-Session-ID"]=this.sessionId);let r="".concat(n).concat(e);console.log("[API] ".concat(t.method||"GET"," ").concat(r)),console.log("[API] Headers:",s),t.body instanceof FormData&&console.log("[API] Sending FormData with keys:",Array.from(t.body.keys()));try{let n=await fetch(r,{...t,headers:s,credentials:"include",mode:"cors"});if(!n.ok){let t="Request failed with status ".concat(n.status),s=null;try{let r=await n.json();t=r.error||r.message||t,s=r.details,console.error("[API Error] ".concat(e,":"),r)}catch(e){t=n.statusText||t}401===n.status&&(console.log("[API] 401 Unauthorized - clearing auth and redirecting to login"),this.clearAuth(),window.location.href="/login");let r=Error(t);throw s&&(r.details=s),r}let o=await n.json();return console.log("[API Response] ".concat(e,":"),o),o}catch(e){if(e instanceof TypeError&&"Failed to fetch"===e.message)throw console.error("[API] Network error - Failed to fetch. Possible causes:"),console.error("  1. CORS blocking the request"),console.error("  2. Network connectivity issues"),console.error("  3. API server is down"),console.error("  4. SSL/TLS certificate issues"),console.error("  URL: ".concat(r)),Error("Network error: Unable to connect to the server. Please check your connection and try again.");throw e}}constructor(){this.token=null,this.sessionId=null,this.auth={logout:async()=>{await this.request("/auth/logout",{method:"POST"}),this.clearAuth()},verify:()=>this.request("/auth/verify")},this.profile={get:()=>this.request("/profile"),update:e=>this.request("/profile",{method:"PUT",body:JSON.stringify(e)}),uploadAvatar:async e=>{let t=new FormData;return t.append("file",e),this.request("/upload/avatar",{method:"POST",body:t})},create:e=>this.request("/profile",{method:"POST",body:JSON.stringify(e)}),delete:()=>this.request("/profile",{method:"DELETE"})},this.users={list:e=>{let t=new URLSearchParams(e).toString();return this.request("/users".concat(t?"?".concat(t):""))},get:e=>this.request("/users/".concat(e)),search:e=>this.request("/users/search?q=".concat(encodeURIComponent(e)))},this.chats={list:()=>this.request("/chats"),create:e=>this.request("/chats",{method:"POST",body:JSON.stringify({otherUserId:e})}),getMessages:(e,t)=>{let s=new URLSearchParams(t).toString();return this.request("/chats/".concat(e,"/messages").concat(s?"?".concat(s):""))},sendMessage:(e,t)=>this.request("/chats/".concat(e,"/messages"),{method:"POST",body:JSON.stringify({content:t})})},this.health=()=>fetch("".concat(n,"/health")).then(e=>e.json()),this.token=localStorage.getItem("pharmx_token"),this.sessionId=localStorage.getItem("pharmx_session")}}let o=new r},3892:function(e,t,s){"use strict";s.d(t,{cn:function(){return o}});var n=s(2605),r=s(1638);function o(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,n.W)(t))}},991:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(6576).Z)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},778:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(6576).Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])},1978:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(6576).Z)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]])},4275:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(6576).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},9198:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(6576).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},8504:function(e,t,s){"use strict";var n=s(3226);s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[966,485,937,115,364,744],function(){return e(e.s=2639)}),_N_E=e.O()}]);