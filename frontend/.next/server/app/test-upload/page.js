(()=>{var e={};e.id=534,e.ids=[534],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},2711:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>h,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(5968),s(5943),s(2874);var r=s(7105),a=s(5265),o=s(157),i=s.n(o),n=s(4665),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let d=["",{children:["test-upload",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5968)),"C:\\Users\\kasim\\pharmx-social-1\\frontend\\app\\test-upload\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,7418))).default(e),async e=>(await Promise.resolve().then(s.bind(s,9527))).default(e)],apple:[async e=>(await Promise.resolve().then(s.bind(s,9204))).default(e)],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,5943)),"C:\\Users\\kasim\\pharmx-social-1\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,2874,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,7418))).default(e),async e=>(await Promise.resolve().then(s.bind(s,9527))).default(e)],apple:[async e=>(await Promise.resolve().then(s.bind(s,9204))).default(e)],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\kasim\\pharmx-social-1\\frontend\\app\\test-upload\\page.tsx"],h="/test-upload/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/test-upload/page",pathname:"/test-upload",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6690:(e,t,s)=>{Promise.resolve().then(s.bind(s,4013))},4013:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(9899),a=s(5507),o=s(3134),i=s(7241);function n(){let[e,t]=(0,a.useState)(""),[s,n]=(0,a.useState)([]),l=e=>{n(t=>[...t,`${new Date().toISOString()}: ${e}`]),console.log(e)},d=async()=>{try{l("Testing authentication...");let e=await o.x.auth.verify();l(`Auth successful: ${JSON.stringify(e)}`),t("✅ Authentication working")}catch(e){l(`Auth failed: ${e}`),t("❌ Authentication failed")}},c=async()=>{try{l("Testing upload service...");let e=await fetch("https://pharmx-api.kasimhussain333.workers.dev/api/v1/upload/test"),s=await e.json();l(`Upload service test: ${JSON.stringify(s)}`),t(s.hasR2&&s.hasDB?"✅ Upload service configured":"❌ Upload service misconfigured")}catch(e){l(`Upload service test failed: ${e}`),t("❌ Upload service test failed")}},h=async e=>{let s=e.target.files?.[0];if(s){l(`Selected file: ${s.name}, size: ${s.size}, type: ${s.type}`);try{l("Uploading file...");let e=await o.x.profile.uploadAvatar(s);l(`Upload successful: ${JSON.stringify(e)}`),t("✅ File uploaded successfully!")}catch(e){l(`Upload failed: ${e}`),t(`❌ Upload failed: ${e}`)}}};return r.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[r.jsx("h1",{className:"text-2xl font-bold mb-8",children:"Upload Test Page"}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(i.z,{onClick:d,children:"Test Authentication"}),r.jsx(i.z,{onClick:c,className:"ml-2",children:"Test Upload Service"})]}),r.jsx("div",{className:"border-t pt-4",children:(0,r.jsxs)("label",{className:"block",children:[r.jsx("span",{className:"text-sm font-medium",children:"Test File Upload:"}),r.jsx("input",{type:"file",accept:"image/*",onChange:h,className:"mt-1 block w-full text-sm text-gray-500   file:mr-4 file:py-2 file:px-4   file:rounded-full file:border-0   file:text-sm file:font-semibold   file:bg-violet-50 file:text-violet-700   hover:file:bg-violet-100"})]})}),e&&r.jsx("div",{className:`p-3 rounded ${e.startsWith("✅")?"bg-green-100":"bg-red-100"}`,children:e}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Logs:"}),r.jsx("div",{className:"bg-gray-100 rounded p-3 h-64 overflow-y-auto",children:0===s.length?r.jsx("p",{className:"text-gray-500",children:"No logs yet..."}):s.map((e,t)=>r.jsx("div",{className:"text-xs font-mono mb-1",children:e},t))})]}),(0,r.jsxs)("div",{className:"border-t pt-4 text-sm text-gray-600",children:[r.jsx("p",{children:"Also check your browser console (F12) for detailed logs."}),r.jsx("p",{children:"API URL: https://pharmx-api.kasimhussain333.workers.dev"})]})]})]})})}},7241:(e,t,s)=>{"use strict";s.d(t,{z:()=>d});var r=s(9899),a=s(5507),o=s(4036),i=s(1138),n=s(6409);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...i},d)=>{let c=a?o.g7:"button";return r.jsx(c,{className:(0,n.cn)(l({variant:t,size:s,className:e})),ref:d,...i})});d.displayName="Button"},3134:(e,t,s)=>{"use strict";s.d(t,{x:()=>o});let r=process.env.NEXT_PUBLIC_API_URL||"https://pharmx-api.kasimhussain333.workers.dev";class a{constructor(){this.token=null,this.sessionId=null,this.auth={logout:async()=>{await this.request("/auth/logout",{method:"POST"}),this.clearAuth()},verify:()=>this.request("/auth/verify")},this.profile={get:()=>this.request("/profile"),update:e=>this.request("/profile",{method:"PUT",body:JSON.stringify(e)}),uploadAvatar:async e=>{let t=new FormData;return t.append("file",e),this.request("/upload/avatar",{method:"POST",body:t})},create:e=>this.request("/profile",{method:"POST",body:JSON.stringify(e)}),delete:()=>this.request("/profile",{method:"DELETE"})},this.users={list:e=>{let t=new URLSearchParams(e).toString();return this.request(`/users${t?`?${t}`:""}`)},get:e=>this.request(`/users/${e}`),search:e=>this.request(`/users/search?q=${encodeURIComponent(e)}`)},this.chats={list:()=>this.request("/chats"),create:e=>this.request("/chats",{method:"POST",body:JSON.stringify({otherUserId:e})}),getMessages:(e,t)=>{let s=new URLSearchParams(t).toString();return this.request(`/chats/${e}/messages${s?`?${s}`:""}`)},sendMessage:(e,t)=>this.request(`/chats/${e}/messages`,{method:"POST",body:JSON.stringify({content:t})})},this.health=()=>fetch(`${r}/health`).then(e=>e.json())}setAuth(e,t){console.log("[API Client] Setting auth - Token length:",e.length,"Session ID:",t),this.token=e,this.sessionId=t}setToken(e){console.log("[API Client] Setting token only - Length:",e.length),this.token=e}getToken(){return this.token,this.token}getSessionId(){return this.sessionId,this.sessionId}clearAuth(){this.token=null,this.sessionId=null}clearToken(){this.clearAuth()}async request(e,t={}){let s={...t.headers||{}};s["Content-Type"]||t.body instanceof FormData||(s["Content-Type"]="application/json"),this.token&&(s.Authorization=`Bearer ${this.token}`),this.sessionId&&(s["X-Session-ID"]=this.sessionId);let a=`${r}${e}`;console.log(`[API] ${t.method||"GET"} ${a}`),console.log("[API] Headers:",s),t.body instanceof FormData&&console.log("[API] Sending FormData with keys:",Array.from(t.body.keys()));try{let r=await fetch(a,{...t,headers:s,credentials:"include",mode:"cors"});if(!r.ok){let t=`Request failed with status ${r.status}`,s=null;try{let a=await r.json();t=a.error||a.message||t,s=a.details,console.error(`[API Error] ${e}:`,a)}catch{t=r.statusText||t}401===r.status&&(console.log("[API] 401 Unauthorized - clearing auth and redirecting to login"),this.clearAuth(),window.location.href="/login");let a=Error(t);throw s&&(a.details=s),a}let o=await r.json();return console.log(`[API Response] ${e}:`,o),o}catch(e){if(e instanceof TypeError&&"Failed to fetch"===e.message)throw console.error("[API] Network error - Failed to fetch. Possible causes:"),console.error("  1. CORS blocking the request"),console.error("  2. Network connectivity issues"),console.error("  3. API server is down"),console.error("  4. SSL/TLS certificate issues"),console.error(`  URL: ${a}`),Error("Network error: Unable to connect to the server. Please check your connection and try again.");throw e}}}let o=new a},5968:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2772).createProxy)(String.raw`C:\Users\kasim\pharmx-social-1\frontend\app\test-upload\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[916,573,645,101],()=>s(2711));module.exports=r})();